<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>快速排序</title>
</head>
<body>
    <script>
        // function quicksort (nums,begin,end){
        //     if(begin <end){
        //         let key = nums[begin]
        //         let i = begin
        //         let j = end
        //         while(i<j){
        //             while(i<j && nums[j] > key){
        //                 j--
        //             }
        //             if( i< j){
        //                 nums[i] = nums[j]
        //                 i++
        //             }
        //             while(i<j && nums[i] < key){
        //                 i++
        //             }
        //             if(i< j){
        //                 nums[j] = nums[i]
        //                 j--
        //             }
        //         }
        //         nums[i] = key
        //         quicksort(nums,begin,j-1)
        //         quicksort(nums,i+1,end)
        //     }
        // }

var reversePairs = function(nums) {
    // 归并排序
    // let sum = 0;
    let res = [];
    mergeSort(nums);
    return res;

    function mergeSort (nums) {
        if(nums.length < 2) return nums;
        const mid = parseInt(nums.length / 2);
        let left = nums.slice(0,mid);
        let right = nums.slice(mid);
        return merge(mergeSort(left), mergeSort(right));
    }

    function merge(left, right) {
        let leftLen = left.length;
        let rightLen = right.length;
        let len = leftLen + rightLen;
        // for(let index = 0, i = 0, j = 0; index < len; index ++) {
        //     if(i >= leftLen) res[index] = right[j ++];
        //     else if (j >= rightLen) res[index] = left[i ++];
        //     else if (left[i] <= right[j]) res[index] = left[i ++];
        //     else {
        //         res[index] = right[j ++];
        //         sum += leftLen - i;//在归并排序中唯一加的一行代码
        //     }
        // }
        console.log(left,right)
        for(let index = 0, i = 0, j = 0; index < len; index ++){
            if(i<leftLen && j<rightLen){
                if(left[i]>right[j]){
                    res[index]=left[i]
                    i++
                }else{
                    res[index]=right[j]
                    j++
                }
            }
        }
        return res;
    }
};
console.log(reversePairs([8,1,4,5,3,2,6,9]))
    </script>
</body>
</html>